FROM alpine/socat:1.8.0.0


# Use the predefined build argument TARGETPLATFORM
ARG TARGETPLATFORM
ARG VERSION_RELEASE_FRP
ARG DOCKER_IMAGE_MULTI_BUILD_DIR

RUN mkdir -p /app /etc/frp

WORKDIR /app

COPY $DOCKER_IMAGE_MULTI_BUILD_DIR/conf/frp*toml /etc/frp/


COPY $DOCKER_IMAGE_MULTI_BUILD_DIR/$TARGETPLATFORM/frp/frpc /usr/bin/
COPY $DOCKER_IMAGE_MULTI_BUILD_DIR/$TARGETPLATFORM/frp/frps /usr/bin/

